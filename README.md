# Video-perspective-transform

Для решения задачи определения объета и поиска его глобальных координат в пространстве с видеофайла необходимо изменить перспективу потока изображений.
Код с данного репозитория позволяет изменять перспективу из пары четырех точек (точек исходного изображения и точек изображения, в которые мы хотим поместить наши иходные точки).

## Comparing source video and perspective-transformed video
#### Source  
![Source](https://github.com/FaNtic1337/Video-perspective-transform/blob/main/Source.gif)
#### Perspective-transformed
![Result](https://github.com/FaNtic1337/Video-perspective-transform/blob/main/Result.gif)
## Main.py

При помощи функции VideoCapture из библиотеки OpenCV мы можем преобразовать видеофайл в список матриц кадров.
Внутри бесконечного цикла пробегаемся по каждому кадру и для каждого кадра ставим граничные точки. В нашем случае нас интересуют лишь границы карты, в которой находится робот.
Опытным путем находим координаты границ для карты и рисуем поверх изображения точки для наглядности.
Далее создаем два массива: массив граничных точек и массив точек для нового изображени. В нашем случае мы хотим разместить полученное изображение по всей ширине и длине нового кадра, поэтому исходыми точками выбраны размеры новго окна.

### Функция getPerspectiveTransform

С помощью getPerspectiveTransform вычисляем перспективное преобразование по четырем парам соответствующих точек. Обращаясь к документации OpenCV, функция описывается так:  

![image](https://user-images.githubusercontent.com/115310102/229380892-1d54655b-87d6-4660-a2f5-91c514960184.png)

### Функция warpPerspective
C помощью warpPerspective мы применяем преобразование перспективы к каждому кадру. Обращаясь к документации OpenCV, функция описывается так:  

![image](https://user-images.githubusercontent.com/115310102/229380948-509fa42c-6045-4645-9d03-92a7f394027e.png)
